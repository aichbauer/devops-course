# Node Package Manager (npm)

## What is npm?

The Node Package Manager (npm) is a package manager for JavaScript, that comes with Node.js. It allows developers to share, reuse, and manage code through packages.

### How do you install npm?

npm is installed automatically with Node.js. You can verify if npm is installed by checking its version:

```sh
npm -v
```

To install or update Node.js (and npm), download the installer from Node.js official site or use a package manager like nvm (Node Version Manager) for flexible version management.

### What is an npm package?

An npm package is a reusable block of JavaScript code, often shared publicly on the npm registry. It can include tools, libraries, or frameworks.

#### What is a global package?

A global package is installed system-wide and is accessible from any project. These are typically CLI tools.

```sh
# istall a global npm package
# replace <package-name> with the package name you want to install e.g., @angular/cli
npm install --global <package-name>
```

#### What is a local package?

A local package is installed in the context of a specific project and stored in the node_modules directory.

```sh
# install a local package
# replace <package-name> with the package name you want to install e.g., fastify
npm install <package-name>
```

### How do you remove a package?

To remove a global package:

```sh
# you can run this command anywhere on the system
# replace <package-name> with the package name you want to install e.g., @angular/cli
npm uninstall --global <package-name>
```


To remove a package locally:

```sh
# make sure to be in the specific project folder
# e.g. where the package.json is located
# replace <package-name> with the package name you want to install e.g., fastify
npm uninstall <package-name>
```

### How do you update a package?

Update a global package:

```sh
# you can run this command anywhere on the system
# replace <package-name> with the package name you want to install e.g., @angular/cli
npm update --global <package-name>
```

To update a package locally:

> NOTE: This does not update the version in the package.json. It updates the version in the package-lock.json according to the version specified in the package json.

```sh
# make sure to be in the specific project folder
# e.g. where the package.json is located
# replace <package-name> with the package name you want to install e.g., fastify
npm update <package-name>
```

### How do you list installed packages?

List global packages:

```sh
# you can run this command anywhere on the system
npm list --global
```

List packages locally:

```sh
# make sure to be in the specific project folder
npm list
```

### How do you find outdated packages?


List outdated global packages:

```sh
# you can run this command anywhere on the system
npm outdated --global
```

List outdated packages locally:

```sh
# make sure to be in the specific project folder
npm outdated
```

### What are dependencies, peerDependencies and devDependencies?

* **dependencies**: Core libraries your project requires in production `npm install <package-name>`
* **peerDependencies**: Specify compatible versions of packages that work with a package. Peer dependencies are not oautomatically installed, you need to install a working version of that dependecy yourself `npm install <package-name>@<working-version>`
* **devDependencies**: Tools and libraries used during development but not needed in production `npm install --save-dev <package-name>`

Dependencies are defined in the package.json file under their respective keys.

### How do you lock package versions?

To lock package versions, npm uses the `package-lock.json` file. This file ensures consistent dependency versions across different environments.

The `package.json` file defines dependency versions or version ranges for your project. When running `npm install` without a `package-lock.json`, npm installs the latest compatible versions based on `package.json` and generates a `package-lock.json` to lock exact versions. With an existing `package-lock.json`, npm installs the exact versions specified, ensuring consistent builds. To update dependencies, modify `package.json` if needed, run `npm update <package-name>`, and commit the updated `package-lock.json`. Avoid editing `package-lock.json` manually, as itâ€™s autogenerated by npm.

### What are npm scripts?

npm scripts are custom scripts defined in the scripts section of package.json. They automate tasks like testing, building, or running a development server.

### How do you run pre-defined npm commands?

There are a few pre-defined npm commands, e.g., `start` or `test`.

You can specify them in the `package.json`:

```json
{
  "scripts": {
    "start": "nodemon ./src/server.js",
    "test": "jest"
  }
}
```

You can run the scripts like:

```sh
# run a pre-defined script
# replace <command> with the pre-defined command
npm <command>

# run the npm script start
npm start

# run the npm script test
npm test
```

### How do you run your own npm commands?

Define your custom commands in package.json under the scripts section:

```json
{
  "scripts": {
    "myowncommand": "nodemon ./src/server.js",
  }
}
```

Run them with:

```sh
# run a pre-defined script
# replace <command> with the your own npm command
npm run <command>

# run the `myowncommand` script
npm run myowncommand
```

### How do you create an npm package?

Initialize the package:

```sh
npm init
```

### How do you publish a package to npm?

```sh
# login to npm
npm login

# publish your package
npm publish
```

### How do you unpublish a package?

```sh
npm unpublish <package-name> --force
```

### How do you clear the npm cache?

Clearing the cache can resolve installation issues caused by corrupt cache files.

```sh
# clear the npm cache
npm cache clean --force
```